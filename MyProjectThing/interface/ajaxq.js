!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(u){var f={},s={};u.ajaxq=function(t,n){if(void 0===n)throw"AjaxQ: queue name is not provided";var r=u.Deferred(),e=r.promise();e.success=e.done,e.error=e.fail,e.complete=e.always;var a="function"==typeof n,i=a?null:u.extend(!0,{},n);return function(e){if(f[t])f[t].push(e);else{f[t]=[];var n=e();s[t]=n}}(function(){var e=u.ajax.apply(window,[a?n():i]);return e.done(function(){r.resolve.apply(this,arguments)}),e.fail(function(){r.reject.apply(this,arguments)}),e.always(o),e}),e;function o(){if(f[t]){var e=f[t].shift();if(e){var n=e();s[t]=n}else delete f[t],delete s[t]}}},u.each(["getq","postq"],function(e,i){u[i]=function(e,n,t,r,a){return u.isFunction(t)&&(a=a||r,r=t,t=void 0),u.ajaxq(e,{type:"postq"===i?"post":"get",url:n,data:t,success:r,dataType:a})}});var n=function(e){return f.hasOwnProperty(e)&&0<f[e].length||s.hasOwnProperty(e)};u.ajaxq.isRunning=function(e){return e?n(e):function(){for(var e in f)if(n(e))return!0;return!1}()},u.ajaxq.getActiveRequest=function(e){if(!e)throw"AjaxQ: queue name is required";return s[e]},u.ajaxq.abort=function(e){if(!e)throw"AjaxQ: queue name is required";var n=u.ajaxq.getActiveRequest(e);delete f[e],delete s[e],n&&n.abort()},u.ajaxq.clear=function(e){if(e)f[e]&&(f[e]=[]);else for(var n in f)f.hasOwnProperty(n)&&(f[n]=[])}});